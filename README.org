* Bayesian Analysis
This is a lisp package to specify a model and calculate posterior distributions as well as
odds ratios using Bayesian statistics, specifically a simple Metropolis-Hastings. It is
predominantly based on Gregory's excellent book on the topic [fn:1].


While this library is research quality, it is good enough for my own use -- I give, of
course, no guarantee on correctness.

That being said, let's say you have some spectral line data (the example and questions
here coming from Chapter 3, [fn:1]) and want to answer some questions about it. So, first
we load the bayesian-analysis and define a package (and directory) to work in:


#+BEGIN_SRC lisp :results none
(ql:quickload :bayesian-analysis)
(ql:quickload :let-plus)
(ql:quickload :iterate)

(defpackage #:bayesian-example
  (:use :cl :iterate :let-plus))

(in-package #:bayesian-example)

(defparameter *dir* "/home/renee/phd/src/penning-analysis.project/bayesian-analysis/")
#+END_SRC

define the example data and plot it:
#+BEGIN_SRC lisp :results output file :exports both
(in-package :bayesian-example)

(defparameter example-data
  '((1 0.25) (2 0.19) (3 0.25) (4 0.56) (5 0.41) (6 0.94) (7 0.84)
    (8 0.3) (9 2.06) (10 1.39) (11 0.07) (12 1.8) (13 1.02) (14 0.46)
    (15 0.29) (16 0.36) (17 0.42) (18 1.43) (19 1.33) (20 0.06) (21 0.82)
    (22 0.42) (23 3.76) (24 1.1) (25 1.31) (26 1.86) (27 0.32) (28 1.14)
    (29 1.24) (30 0.29) (31 0.02) (32 1.52) (33 0.44) (34 0.05) (35 0.59)
    (36 0.94) (37 0.1) (38 0.57) (39 0.4) (40 0.97) (41 2.2) (42 0.15)
    (43 0.37) (44 0.67) (45 0.05) (46 0.2) (47 0.65) (48 1.24) (49 1.56)
    (50 0.64) (51 0.48) (52 1.79) (53 0.07) (54 1.3) (55 0.29) (56 0.23)
    (57 0.5) (58 0.93) (59 1.28) (60 1.98) (61 1.85) (62 0.89) (63 0.65)
    (64 0.28)))


(labels ((cmd (fmt-str &rest args)
	   (mgl-gnuplot:command (apply #'format nil fmt-str args))))
  (mgl-gnuplot:with-session ()
    (cmd "reset")
    ;; (cmd "set terminal wxt enhanced font 'Georgia,8' dashed")
    (cmd "set terminal png enhanced font 'Georgia,10' dashed")
    (cmd "set output '~a/example/just-plot.png'" *dir*)
    (mgl-gnuplot:plot*
     (list
      (mgl-gnuplot:data* example-data "with points pt 7 lc 7 title ''")
      (mgl-gnuplot:data* example-data "with histeps  lc 7 title ''"))) 
    (cmd "unset output")))
(format t "example/just-plot.png")
#+END_SRC

#+RESULTS:
[[file:example/just-plot.png]]





want to answer


* Footnotes
[fn:1] /Bayesian Logical Data Analysis for the Physical Sciences/, Cambridge University
  Press, 2005, https://doi.org/10.1017/CBO9780511791277

